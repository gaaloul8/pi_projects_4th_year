<div class="grid">
    <div class="col-12">
        <div class="card">
            <h5>Event List</h5>
            <p-dataView #dv [value]="events" layout="grid">
                <ng-template pTemplate="header">
                    <div class="flex flex-column md:flex-row md:justify-content-between gap-2">
  
                        <div>
                            <span class="p-input-icon-left">
                              <i class="pi pi-search"></i>
                              <input type="search" pInputText placeholder="Search by Name" [(ngModel)]="searchEventValue">
                            </span>
                          </div>
                          
                        <p-dataViewLayoutOptions></p-dataViewLayoutOptions>
                    </div>
                </ng-template>

                <ng-template let-event pTemplate="list">
                    <div class="grid grid-nogutter">
                        <div class="col-4" *ngFor="let event of events | filter:searchEventValue ; let first = first">
                            <div class="card event-card">
                                <div class="card-body">
                                    <div class="event-details">
                                        <div class="event-type">{{ event.eventType }}</div>
                                        <div class="flex-1 flex flex-column align-items-center text-center md:text-left">
                                            <img [src]="event.image" [alt]="event.eventName" class="event-image" width="150" height="150" />
                                        </div>
                                        
                                    </div>
                                    <div class="event-details">
                                        <div class="font-bold text-2xl">{{ event.eventName }}</div>
                                        <div class="mb-2">{{event.description}}</div>
                                        <div class="flex align-items-center mt-2">
        
                                            <span class="font-semibold">{{event.type}}</span>
                                        </div>
                                        <p-rating [ngModel]="event.rating" [readonly]="true" [cancel]="false" styleClass="mb-2"></p-rating>
                                        <div class="event-date">{{ event.datetime | date: 'yyyy-MM-dd HH:mm:ss' }}</div>
                                        <div class="flex flex-row md:flex-column justify-content-between w-full md:w-auto align-items-center md:align-items-end mt-5 md:mt-0">
                                            <span class="text-2xl font-semibold mb-2 align-self-center md:align-self-end"></span>
                                            <button pButton icon="pi-calendar-plus" label="Book Event" styleClass="mb-2 p-button-sm" [disabled]="event.status === 'Finished'" (click)="bookEvent(event.idEvent)"></button>
                                    
                                            <span [class]="'product-badge status-' + event.status.toLowerCase()">{{event.status}}</span>
                                        </div>
                                        <div class="event-actions">
                                            
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </ng-template>
            </p-dataView>
        </div>
    </div>
</div>

<p-toast></p-toast> <!-- Ajoutez le p-toast en dehors de la boucle ngFor -->

